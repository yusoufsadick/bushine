{%- comment -%}
  Testimonials Carousel - Dark SaaS Style
{%- endcomment -%}

<section class="testimonials-carousel section" id="testimonials-carousel-{{ section.id }}">
  <div class="container">
    <div class="section__header">
      <h2 class="section__title gradient-text">{{ section.settings.title | default: 'Love Stories' }}</h2>
      {%- if section.settings.subtitle != blank -%}
        <p class="section__subtitle">{{ section.settings.subtitle }}</p>
      {%- else -%}
        <p class="section__subtitle">See what our customers are saying about their special moments</p>
      {%- endif -%}
    </div>

    <div class="testimonials-carousel carousel-container">
      <div class="carousel-track">
        {%- for block in section.blocks -%}
          <div class="carousel-slide" {{ block.shopify_attributes }}>
            <div class="testimonial-card-dark glass-card">
              <div class="testimonial-card-dark__content">
                <div class="testimonial-card-dark__quote">
                  <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 20C10 15.5817 13.5817 12 18 12C18.5523 12 19 12.4477 19 13C19 13.5523 18.5523 14 18 14C14.6863 14 12 16.6863 12 20C12 23.3137 14.6863 26 18 26C21.3137 26 24 23.3137 24 20C24 15.5817 20.4183 12 16 12C11.5817 12 8 15.5817 8 20C8 24.4183 11.5817 28 16 28C18.2091 28 20.2091 27.1046 21.6569 25.6569C22.0474 25.2663 22.6805 25.2663 23.0711 25.6569C23.4616 26.0474 23.4616 26.6805 23.0711 27.0711C21.2091 28.933 18.7909 30 16 30C10.4772 30 6 25.5228 6 20C6 14.4772 10.4772 10 16 10C20.4183 10 24 13.5817 24 18C24 22.4183 20.4183 26 16 26C11.5817 26 8 22.4183 8 18C8 13.5817 11.5817 10 16 10C20.4183 10 24 13.5817 24 18Z" fill="currentColor" opacity="0.3"/>
                  </svg>
                </div>
                
                <p class="testimonial-card-dark__text">{{ block.settings.quote }}</p>
                
                <div class="testimonial-card-dark__rating">
                  {%- for i in (1..5) -%}
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="currentColor"/>
                    </svg>
                  {%- endfor -%}
                </div>
                
                <div class="testimonial-card-dark__author">
                  <div class="testimonial-card-dark__avatar">
                    {%- if block.settings.avatar != blank -%}
                      <img src="{{ block.settings.avatar | image_url: width: 60 }}" alt="{{ block.settings.author_name }}" loading="lazy">
                    {%- else -%}
                      <div class="avatar-placeholder">{{ block.settings.author_name | slice: 0, 1 }}</div>
                    {%- endif -%}
                  </div>
                  <div class="testimonial-card-dark__info">
                    <h4 class="testimonial-card-dark__name">{{ block.settings.author_name }}</h4>
                    {%- if block.settings.author_location != blank -%}
                      <p class="testimonial-card-dark__location">{{ block.settings.author_location }}</p>
                    {%- endif -%}
                  </div>
                </div>
              </div>
            </div>
          </div>
        {%- endfor -%}
      </div>
    </div>
  </div>
</section>

<style>
  .testimonials-carousel {
    background: var(--dark-bg-primary, #0a0a0a);
    padding: 6rem 0;
  }

  .testimonial-card-dark {
    height: 100%;
    padding: 3rem;
  }

  .testimonial-card-dark__content {
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  .testimonial-card-dark__quote {
    color: var(--neon-pink, #FF1493);
    margin-bottom: 1.5rem;
    opacity: 0.6;
  }

  .testimonial-card-dark__text {
    font-size: 1.125rem;
    line-height: 1.8;
    color: var(--text-secondary, rgba(255, 255, 255, 0.8));
    margin-bottom: 2rem;
    font-style: italic;
    flex: 1;
  }

  .testimonial-card-dark__rating {
    display: flex;
    gap: 4px;
    margin-bottom: 2rem;
    color: var(--neon-pink, #FF1493);
  }

  .testimonial-card-dark__author {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding-top: 1.5rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
  }

  .testimonial-card-dark__avatar {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    overflow: hidden;
    border: 2px solid var(--neon-pink, #FF1493);
    box-shadow: 0 0 15px rgba(255, 20, 147, 0.3);
  }

  .testimonial-card-dark__avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .avatar-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--gradient-pink-rose, linear-gradient(135deg, #FF1493 0%, #FF69B4 100%));
    color: var(--text-primary, #ffffff);
    font-size: 1.5rem;
    font-weight: 700;
  }

  .testimonial-card-dark__name {
    font-family: var(--font-heading, 'Playfair Display', serif);
    font-size: 1.125rem;
    font-weight: 600;
    margin: 0 0 0.25rem 0;
    color: var(--text-primary, #ffffff);
  }

  .testimonial-card-dark__location {
    font-size: 0.875rem;
    color: var(--text-tertiary, rgba(255, 255, 255, 0.6));
    margin: 0;
  }

  .carousel-slide {
    flex: 0 0 100%;
    padding: 0 15px;
  }

  @media (min-width: 768px) {
    .carousel-slide {
      flex: 0 0 50%;
    }
  }

  @media (min-width: 1024px) {
    .carousel-slide {
      flex: 0 0 33.333%;
    }
  }
</style>

{% schema %}
{
  "name": "Testimonials Carousel",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Love Stories"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Subtitle"
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
        {
          "type": "textarea",
          "id": "quote",
          "label": "Quote",
          "default": "The perfect gift for my partner! The packaging was beautiful and the quality exceeded my expectations."
        },
        {
          "type": "text",
          "id": "author_name",
          "label": "Author Name",
          "default": "Sarah M."
        },
        {
          "type": "text",
          "id": "author_location",
          "label": "Author Location",
          "default": "New York, NY"
        },
        {
          "type": "image_picker",
          "id": "avatar",
          "label": "Avatar"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Testimonials Carousel",
      "blocks": [
        {
          "type": "testimonial",
          "settings": {
            "quote": "The perfect gift for my partner! The packaging was beautiful and the quality exceeded my expectations.",
            "author_name": "Sarah M.",
            "author_location": "New York, NY"
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "quote": "Made our Valentine's Day extra special. Fast shipping and amazing customer service!",
            "author_name": "Michael R.",
            "author_location": "Los Angeles, CA"
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "quote": "I've ordered multiple times and every gift has been perfect. Highly recommend!",
            "author_name": "Emily T.",
            "author_location": "Chicago, IL"
          }
        }
      ]
    }
  ]
}
{% endschema %}
