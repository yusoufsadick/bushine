{%- comment -%}
  Valentine Bundles Slider - Dark SaaS Style (FIXED)
{%- endcomment -%}

{%- assign bundle_collection = collections[section.settings.collection] | default: collections.all -%}

<section class="valentine-bundles-slider" id="bundles-slider-{{ section.id }}">
  <div class="page-width">
    
    <div class="section__header">
      <h2 class="section__title gradient-text">
        {{ section.settings.title | default: 'Valentine Gift Bundles' }}
      </h2>

      {% if section.settings.subtitle != blank %}
        <p class="section__subtitle">{{ section.settings.subtitle }}</p>
      {% else %}
        <p class="section__subtitle">Save more when you bundle the perfect gifts together</p>
      {% endif %}
    </div>

    <div class="bundles-grid">
      {% if bundle_collection.products.size > 0 %}
        {% for product in bundle_collection.products limit: section.settings.products_to_show %}
          
          <div class="bundle-card-dark glass-card">
            <a href="{{ product.url }}" class="bundle-card-dark__link">


              <div class="bundle-card-dark__content">
                <h3 class="bundle-card-dark__title">{{ product.title }}</h3>

                {% if product.description != blank %}
                  <p class="bundle-card-dark__description">
                    {{ product.description | strip_html | truncate: 120 }}
                  </p>
                {% else %}
                  <p class="bundle-card-dark__description">
                    Perfect gift bundle for your loved one this Valentine's Day
                  </p>
                {% endif %}

                <div class="bundle-card-dark__price">
                  {% if product.compare_at_price > product.price %}
                    <span class="price--compare">{{ product.compare_at_price | money }}</span>
                  {% endif %}
                  <span class="price--current">{{ product.price | money }}</span>
                </div>

                <span class="btn-dark-primary">View Bundle</span>
              </div>

            </a>
          </div>

        {% endfor %}
      {% else %}
        <p style="color:#fff; text-align:center;">No bundle products found.</p>
      {% endif %}
    </div>
  </div>
</section>

<style>
/* SECTION */
.valentine-bundles-slider {
  background: #0e0e13;
  padding: 5rem 0;
  overflow: hidden;
}

.section__header {
  text-align: center;
  margin-bottom: 3rem;
}

.section__title {
  font-size: clamp(2rem, 4vw, 3rem);
  color: #fff;
}

.section__subtitle {
  color: rgba(255,255,255,0.7);
  max-width: 600px;
  margin: 0.5rem auto 0;
}

/* GRID (NO BROKEN SCROLL) */
.bundles-grid {
  display: grid;
  grid-template-columns: repeat(1, 1fr);
  gap: 2rem;
}

@media (min-width: 768px) {
  .bundles-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 1024px) {
  .bundles-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* CARD */
.bundle-card-dark {
  background: linear-gradient(180deg,#14141c,#0b0b11);
  border-radius: 18px;
  overflow: hidden;
  box-shadow: 0 20px 60px rgba(0,0,0,0.5);
  transition: transform .25s ease, box-shadow .25s ease;
}

.bundle-card-dark:hover {
  transform: translateY(-6px);
  box-shadow: 0 30px 80px rgba(255,20,147,0.25);
}

.bundle-card-dark__link {
  display: block;
  text-decoration: none;
  color: inherit;
}

/* IMAGE */
.bundle-card-dark__image {
  position: relative;
  padding-top: 65%;
  overflow: hidden;
}

.bundle-card-dark__image img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* BADGE */
.bundle-badge {
  position: absolute;
  top: 12px;
  right: 12px;
  background: #ff1493;
  color: #fff;
  padding: 6px 12px;
  border-radius: 999px;
  font-size: 0.75rem;
  font-weight: 700;
}

/* CONTENT */
.bundle-card-dark__content {
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
}

.bundle-card-dark__title {
  font-size: 1.2rem;
  color: #fff;
  margin-bottom: 0.75rem;
}

.bundle-card-dark__description {
  color: rgba(255,255,255,0.75);
  font-size: 0.9rem;
  line-height: 1.5;
  margin-bottom: 1rem;
  flex: 1;
}

.bundle-card-dark__price {
  margin-bottom: 1.25rem;
}

.price--compare {
  text-decoration: line-through;
  color: rgba(255,255,255,0.5);
  margin-right: 0.5rem;
}

.price--current {
  font-size: 1.5rem;
  font-weight: 700;
  color: #ff1493;
}

/* BUTTON */
.btn-dark-primary {
  display: inline-block;
  text-align: center;
  background: linear-gradient(135deg,#ff1493,#ff5fc0);
  color: #fff;
  padding: 0.75rem 1.5rem;
  border-radius: 999px;
  font-weight: 700;
  box-shadow: 0 0 30px rgba(255,20,147,0.6);
}
</style>

{% schema %}
{
  "name": "Valentine Bundles Slider",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Valentine Gift Bundles"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Subtitle"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "label": "Products to show",
      "min": 3,
      "max": 12,
      "step": 1,
      "default": 6
    }
  ],
  "presets": [
    {
      "name": "Valentine Bundles Slider"
    }
  ]
}
{% endschema %}
